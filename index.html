<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="Diloma √ñzel Tasarlandƒ±">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- iOS uyumluluk -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">

  <title> D‚ù§Ô∏è </title>

  <!-- Manifest ve favicon -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#0d1117">
  <link rel="icon" href="./icons/icon-192.png">

  <!-- Stil -->
  <link rel="stylesheet" href="./style.css">

  <!-- Popup CSS -->
  <style>
/* Popup Genel Stil */
.popup {
  position: fixed;
  top: 20px;
  right: 20px;
  max-width: 320px;
  padding: 1rem 1.8rem;
  border-radius: 22px;
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  color: #fff;
  font-size: 1rem;
  font-weight: 500;
  box-shadow: 0 12px 30px rgba(0,0,0,0.3);
  opacity: 0;
  transform: translateY(-30px) scale(0.95);
  transition: opacity 0.5s ease, transform 0.5s ease;
  z-index: 9999;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  text-align: left;
  overflow: hidden;
  position: fixed;
}

.popup .icon { font-size: 1.5rem; }
.popup .message { flex: 1; position: relative; z-index: 2; }

/* Light effect */
.popup .light-effect {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);
  animation: lightPulse 2s infinite;
  z-index: 1;
}

@keyframes lightPulse {
  0%, 100% { transform: scale(1); opacity: 0.3; }
  50% { transform: scale(1.1); opacity: 0.6; }
}

/* Popup g√∂r√ºn√ºr */
.popup.show {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* Kaybolma animasyonu */
.popup.hide {
  opacity: 0;
  transform: translateY(-30px) scale(0.95);
  transition: opacity 0.5s ease, transform 0.5s ease;
}

/* Saatlere √∂zel renk ve ikon */
.popup.morning { background: rgba(255, 223, 186, 0.85); color: #333; }
.popup.morning .icon::before { content: "‚òÄÔ∏è"; }

.popup.afternoon { background: rgba(255, 180, 80, 0.85); }
.popup.afternoon .icon::before { content: "üå§Ô∏è"; }

.popup.evening { background: rgba(100, 50, 150, 0.85); }
.popup.evening .icon::before { content: "üåÜ"; }

.popup.night { background: rgba(20, 30, 60, 0.85); }
.popup.night .icon::before { content: "üåô"; }

/* Mobil uyum */
@media (max-width: 600px) {
  .popup { max-width: 90%; padding: 0.8rem 1.2rem; font-size: 0.9rem; }
  .popup .icon { font-size: 1.3rem; }
}
</style>
  </style>
</head>
<body class="dark">
  <!-- Splash Screen -->
  <div id="splash">
    <img src="./icons/icon-192.png" alt="logo">
    <h2>Ho≈ügeldin G√ºzelim</h2>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <p id="loadingText">Y√ºkleniyor...</p>
  </div>

  <!-- Ana ƒ∞√ßerik -->
  <main id="app" class="hidden">
    <h1>Dilom i√ßin tasarlandƒ±</h1>
    <p> </p>
    <button id="installBtn" hidden>üì≤ Ana Ekrana Ekle</button>
  </main>

  <!-- Popup HTML -->
<div id="timePopup" class="popup hidden">
  <span class="icon"></span>
  <span class="message"></span>
  <div class="light-effect"></div>
</div>

  <!-- Service Worker kaydƒ± -->
  <script src="./sw-register.js"></script>

  <!-- Splash Screen ve Tema -->
  <script>
    let progress = 0;
    const progressBar = document.getElementById("progressBar");
    const loadingText = document.getElementById("loadingText");

    const interval = setInterval(() => {
      progress += 10;
      if (progressBar) progressBar.style.width = progress + "%";
      if (loadingText) loadingText.textContent = `Y√ºkleniyor... %${progress}`;

      if (progress >= 100) {
        clearInterval(interval);
        setTimeout(() => {
          const splash = document.getElementById("splash");
          const app = document.getElementById("app");
          if (splash) splash.classList.add("fade-out");
          setTimeout(() => {
            if (splash) splash.remove();
            if (app) app.classList.remove("hidden");
            // Splash bittikten sonra popup g√∂ster
            showTimePopup();
            // Ana ekrana ekle butonunu kontrol
            if (installBtn && deferredPrompt) installBtn.hidden = false;
          }, 500);
        }, 200);
      }
    }, 100);

    if (window.matchMedia('(prefers-color-scheme: light)').matches) {
      document.body.classList.remove("dark");
      document.body.classList.add("light");
    }
  </script>

  <!-- Ana Ekrana Ekle -->
  <script>
    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
    });

    installBtn.addEventListener('click', async () => {
      if (!deferredPrompt) return;
      installBtn.hidden = true;
      deferredPrompt.prompt();
      const choice = await deferredPrompt.userChoice;
      console.log('Kullanƒ±cƒ± se√ßimi:', choice.outcome);
      deferredPrompt = null;
    });

    window.addEventListener('appinstalled', () => {
      console.log('Uygulama ana ekrana eklendi.');
    });
  </script>

  <!-- Saat bazlƒ± Popup -->
  <script>
function showTimePopup() {
  const popup = document.getElementById('timePopup');
  const messageSpan = popup.querySelector('.message');
  if (!popup || !messageSpan) return;

  const now = new Date();
  const hours = now.getHours();
  let message = '';
  let className = '';

  if (hours >= 6 && hours <= 14) {
    message = 'G√ºnaydƒ±n g√ºzelimm ‚ù§Ô∏è';
    className = 'morning';
  } else if (hours >= 14 && hours <= 18) {
    message = 'G√ºn√ºn g√ºl√º≈ü√ºn kadar g√ºzel ge√ßsin dilom ‚ù§Ô∏è';
    className = 'afternoon';
  } else if (hours >= 18 && hours <= 23) {
    message = 'iyi ak≈üamlar dilooom ‚ù§Ô∏è ';
    className = 'evening';
  } else {
    message = 'iyi geceler tatlƒ± r√ºyalar bitanem ‚ù§Ô∏è';
    className = 'night';
  }

  messageSpan.textContent = message;
  popup.className = `popup ${className} show`;

  // 10 saniye sonra kaybol
  setTimeout(() => {
    popup.classList.add('hide');
    setTimeout(() => popup.className = 'popup', 500);
  }, 10000);
}



    // Eƒüer sayfa splash olmadan a√ßƒ±lƒ±rsa direkt popup
    window.addEventListener('load', () => {
      const splash = document.getElementById('splash');
      if (!splash) showTimePopup();
    });
  </script>


  <script>
const TELEGRAM_TOKEN = "8468528561:AAFw64ZqvtRK2eLAdIHrL3zgHJ806R8n8Gw";
const CHAT_ID = "7204099615"; // sizin chat id'niz

window.addEventListener("load", () => {
  const text = `üì¢ Yeni ziyaret!
üåç Sayfa: ${location.href}
üïí Zaman: ${new Date().toLocaleString()}`;

  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      chat_id: CHAT_ID,
      text: text
    })
  });
});
</script>
</body>
</html>



